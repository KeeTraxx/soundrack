webpackJsonp([1],{"8g+t":function(t,e){},AyQn:function(t,e){},BqJM:function(t,e){},Fw6i:function(t,e){},Ld3z:function(t,e){},M110:function(t,e){},NHnr:function(t,e,n){"use strict";function o(t){n("BqJM")}function i(t){n("weY5")}function s(t){n("AyQn")}function a(t){n("M110")}function u(t){n("NO0K")}function c(t){return 440*Math.pow(2,(t-69)/12)}function r(t){n("Fw6i")}function v(t){var e=t.shiftKey?24:12;switch(t.code){case"KeyA":return 8+e;case"KeyZ":return 9+e;case"KeyS":return 10+e;case"KeyX":return 11+e;case"KeyC":return 12+e;case"KeyF":return 13+e;case"KeyV":return 14+e;case"KeyG":return 15+e;case"KeyB":return 16+e;case"KeyN":return 17+e;case"KeyJ":return 18+e;case"KeyM":return 19+e;case"KeyK":return 20+e;case"Comma":return 21+e;case"KeyL":return 22+e;case"Period":return 23+e;case"Slash":return 24+e;case"Quote":return 25+e;default:return}}function d(t){n("WPyr")}function l(t){n("Ld3z")}function f(t){n("rWrU")}function m(t){n("nIYI"),n("8g+t")}Object.defineProperty(e,"__esModule",{value:!0});for(var p=n("7+uW"),h=n("NYxO"),y={name:"app"},b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("button",{on:{click:function(e){t.$store.state.backview=!t.$store.state.backview}}},[t._v("switch view")]),t._v(" "),n("router-view")],1)},_=[],w={render:b,staticRenderFns:_},$=w,C=n("VU/8"),k=o,g=C(y,$,!1,k,null,null),A=g.exports,x=n("/ocq"),E=n("wVp8"),O=n.n(E),I={name:"MidiInput",data:function(){return{inputs:O.a.inputs}},mounted:function(){var t=this;O.a.enable(function(e){if(e)return console.log(e);console.log("WebMidi enabled!"),O.a.addListener("connected",function(e){try{"input"===e.port.type&&(e.port.addListener("noteon","all",function(e){t.$emit(e.type,e)}),e.port.addListener("noteoff","all",function(e){t.$emit(e.type,e)}))}catch(t){}})})}},F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"midiinput"},[n("front",{staticClass:"gameboy"},[n("h1",[t._v("Midi devices")]),t._v(" "),n("ul",{staticClass:"minidisplay"},t._l(t.inputs,function(e){return n("li",{key:e.id},[t._v(t._s(e.name))])}))]),t._v(" "),n("back",{ref:"back",attrs:{"has-event-outputs":"true"}},[t._v("\n    Back\n  ")])],1)},K=[],V={render:F,staticRenderFns:K},B=V,N=n("VU/8"),T=i,M=N(I,B,!1,T,"data-v-8a36113a",null),R=M.exports,S=n("0Qa9"),q=n.n(S),U=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],G=[],L=21;L<=109;L++)G[L]=function(t){return U[(t-12)%12]}(L)+function(t){return~~((t-12)/12)}(L);for(var z,P,D,j,W={name:"SoundPlayer",props:["output"],data:function(){return{availableInstruments:[],instruments:{},instrument:void 0,loading:!1,activenotes:{},msg:"",outputNode:this.$store.state.audioContext.createGain(),active:!0}},mounted:function(){var t=this;fetch("https://gleitz.github.io/midi-js-soundfonts/FluidR3_GM/names.json").then(function(t){return t.json()}).then(function(e){t.availableInstruments=e,t.loadInstrument("bright_acoustic_piano")}).catch(function(e){console.log("errrerd",e),t.msg="Failed to fetch instruments"}),this.$watch("instrument",function(e){if(e){var n=t.availableInstruments.indexOf(e.name),o=t.$refs.instrumentList.children[n];console.log(t.$refs.instrumentList),t.$refs.instrumentList.scrollTop=o.offsetTop-t.$refs.instrumentList.offsetTop-50}}),this.$on("noteon",this.noteon),this.$on("noteoff",this.noteoff)},methods:{noteon:function(t){if(this.active&&this.instrument[t.note.number]){console.log("noteon",t);var e=this.$store.state.audioContext.createBufferSource(),n=this.$store.state.audioContext.createGain();n.gain.value=t.velocity,e.buffer=this.instrument[t.note.number].buffer,e.connect(n),n.connect(this.outputNode),e.start(),this.instrument[t.note.number].source=e,this.instrument[t.note.number].gainNode=n,this.$set(this.activenotes,t.note.name+t.note.octave,t)}},noteoff:function(t){this.instrument[t.note.number].source&&(console.log("noteoff",t),this.instrument[t.note.number].gainNode.gain.linearRampToValueAtTime(0,this.$store.state.audioContext.currentTime+.3),this.instrument[t.note.number].source.stop(this.$store.state.audioContext.currentTime+.3),p.a.delete(this.activenotes,t.note.name+t.note.octave))},loadInstrument:function(t){var e=this;this.loading=!0,q.a.map(G,function(n){if(void 0!==n)return fetch("https://gleitz.github.io/midi-js-soundfonts/FluidR3_GM/"+t+"-mp3/"+n+".mp3").then(function(t){return t.arrayBuffer()}).then(function(t){return e.$store.state.audioContext.decodeAudioData(t)}).then(function(t){return{buffer:t}}).catch(function(t){console.log(t)})}).then(function(n){n.name=t,e.instruments[t]=n,e.instrument=n,e.loading=!1,console.log(t,"loaded!")})}}},J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"soundplayer"},[n("front",{staticClass:"gameboy"},[n("div",{staticClass:"row"},[n("div",{staticClass:"display"},[n("div",{staticClass:"row fixed"},[t.loading?n("div",{staticStyle:{"flex-grow":"1"}},[t._v("Loading... please wait!")]):t._e(),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],ref:"instrumentList",staticClass:"instrument-list"},t._l(t.availableInstruments,function(e){return n("li",{key:e,class:{active:t.instrument&&t.instrument.name==e},on:{click:function(n){t.loadInstrument(e)}}},[t._v("\n              "+t._s(e)+"\n            ")])})),t._v(" "),n("p",[t._v(t._s(t.msg))])])])]),t._v(" "),n("h1",[t._v("SoundPlayer")]),t._v(" "),n("button",{on:{click:function(e){t.active=!t.active}}},[t._v(t._s(t.active?"ON":"OFF"))])]),t._v(" "),n("back",{ref:"back",attrs:{"has-event-inputs":"true","has-audio-outputs":"true"}},[t._v("\n    Back\n  ")])],1)},Y=[],Q={render:J,staticRenderFns:Y},H=Q,X=n("VU/8"),Z=s,tt=X(W,H,!1,Z,"data-v-4d63cfee",null),et=tt.exports,nt=["#1d2213","#494f3e","#626e4c"],ot={name:"Equalizer",props:["input","output"],data:function(){return{analyser:void 0,dataArray:[],inputNode:this.$store.state.audioContext.createGain()}},mounted:function(){this.analyser=this.$store.state.audioContext.createAnalyser(),this.analyser.fftSize=256;var t=this.analyser.frequencyBinCount;this.dataArray=new Uint8Array(t),this.$refs.canvas.getContext("2d").clearRect(0,0,760,140),this.inputNode.connect(this.analyser),this.analyser.connect(this.output),requestAnimationFrame(this.draw)},methods:{draw:function(){var t=this.$refs.canvas.getContext("2d");this.analyser.getByteFrequencyData(this.dataArray),t.clearRect(0,0,760,140);for(var e=760/this.dataArray.length*1.5,n=void 0,o=5,i=0;i<this.dataArray.length;i++){n=this.dataArray[i]/2;for(var s=0;s<n;s+=8){var a=Math.min(2,s/45*2);t.fillStyle=nt[~~a],2===a?(t.strokeStyle=nt[1],t.strokeRect(o,130-s,e,6)):t.fillRect(o,130-s,e,6)}o+=e+3}requestAnimationFrame(this.draw)}}},it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"equalizer"},[n("front",{staticClass:"gameboy"},[n("canvas",{ref:"canvas",staticClass:"display",attrs:{width:"760",height:"140"}}),t._v(" "),n("span",[t._v("\n      Equalizer\n    ")])]),t._v(" "),n("back",{attrs:{"has-audio-inputs":"true"}},[t._v("\n    Back\n  ")])],1)},st=[],at={render:it,staticRenderFns:st},ut=at,ct=n("VU/8"),rt=a,vt=ct(ot,ut,!1,rt,"data-v-352b3aa4",null),dt=vt.exports,lt={name:"Front"},ft=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.backview,expression:"!$store.state.backview"}],staticClass:"front"},[t._t("default")],2)},mt=[],pt={render:ft,staticRenderFns:mt},ht=pt,yt=n("VU/8"),bt=yt(lt,ht,!1,null,null,null),_t=bt.exports,wt={name:"Back",props:["hasEventInputs","hasEventOutputs","hasAudioInputs","hasAudioOutputs"],data:function(){return{outgoingAudioConnections:[],incomingAudioConnections:[],outgoingEventConnections:[],incomingEventConnections:[]}},methods:{connectEventInput:function(t,e){console.log("connectInput",t,e),z=e,"mouseup"===t.type&&this.connectEvent(z,P)},connectEventOutput:function(t,e){console.log("connectOutput",t,e),P=e,"mouseup"===t.type&&this.connectEvent(z,P)},connectEvent:function(t,e){t&&e&&(t!==e?(console.log("would connect",t,e),e.$on("noteon",function(e){t.$emit("noteon",e)}),e.$on("noteoff",function(e){t.$emit("noteoff",e)}),z=void 0,P=void 0):console.log("not connecting an obvious loop",t,e))},connectAudioInput:function(t,e){console.log("connectInput",t,e),D=e,"mouseup"===t.type&&this.connectAudio(D,j)},connectAudioOutput:function(t,e){console.log("connectOutput",t,e),j=e,"mouseup"===t.type&&this.connectAudio(D,j)},connectAudio:function(t,e){t&&e&&(t!==e?(console.log("would connect",t,e),e.outputNode.connect(t.inputNode),D=void 0,j=void 0):console.log("not connecting an obvious loop",t,e))}}},$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.backview,expression:"$store.state.backview"}],staticClass:"back"},[t._t("default"),t._v(" "),n("div",{staticClass:"row"},[t.hasEventInputs?n("div",{on:{mousedown:function(e){t.connectEventInput(e,t.$parent)},mouseup:function(e){t.connectEventInput(e,t.$parent)}}},[t._v("\n      EventInputs\n    ")]):t._e(),t._v(" "),t.hasEventOutputs?n("div",{on:{mousedown:function(e){t.connectEventOutput(e,t.$parent)},mouseup:function(e){t.connectEventOutput(e,t.$parent)}}},[t._v("\n      EventOutputs\n    ")]):t._e(),t._v(" "),t.hasAudioInputs?n("div",{on:{mousedown:function(e){t.connectAudioInput(e,t.$parent)},mouseup:function(e){t.connectAudioInput(e,t.$parent)}}},[t._v("\n      AudioInputs\n    ")]):t._e(),t._v(" "),t.hasAudioOutputs?n("div",{on:{mousedown:function(e){t.connectAudioOutput(e,t.$parent)},mouseup:function(e){t.connectAudioOutput(e,t.$parent)}}},[t._v("\n      AudioOutputs\n    ")]):t._e()])],2)},Ct=[],kt={render:$t,staticRenderFns:Ct},gt=kt,At=n("VU/8"),xt=u,Et=At(wt,gt,!1,xt,"data-v-620b6fa1",null),Ot=Et.exports,It=[],Ft={name:"KSynth",components:{Front:_t,Back:Ot},props:["output"],data:function(){return{type:"sine",oscillatorTypes:["sine","square","sawtooth","triangle"],outputNode:this.$store.state.audioContext.createGain(),active:!1}},mounted:function(){this.$on("noteon",this.noteon),this.$on("noteoff",this.noteoff)},methods:{noteon:function(t){if(this.active){It[t.note.number]&&It[t.note.number].stop();var e=this.$store.state.audioContext.createGain();e.gain.value=.5*t.velocity,It[t.note.number]=this.$store.state.audioContext.createOscillator(),It[t.note.number].type=this.type,It[t.note.number].frequency.value=c(t.note.number),It[t.note.number].connect(e),e.connect(this.outputNode),It[t.note.number].start()}},noteoff:function(t){It[t.note.number]&&It[t.note.number].stop()}}},Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ksynth"},[n("front",{staticClass:"gameboy"},[n("div",{staticClass:"display"},[n("ul",t._l(t.oscillatorTypes,function(e){return n("li",{key:e,class:{active:e==t.type},on:{click:function(n){t.type=e}}},[t._v(t._s(e))])}))]),t._v(" "),n("h1",[t._v("KSynth")]),t._v(" "),n("button",{on:{click:function(e){t.active=!t.active}}},[t._v(t._s(t.active?"ON":"OFF"))])]),t._v(" "),n("back",{ref:"back",attrs:{"has-event-inputs":"true","has-audio-outputs":"true"}},[t._v("\n    Back\n  ")])],1)},Vt=[],Bt={render:Kt,staticRenderFns:Vt},Nt=Bt,Tt=n("VU/8"),Mt=r,Rt=Tt(Ft,Nt,!1,Mt,"data-v-4dca97e4",null),St=Rt.exports,qt={},Ut=0;Ut<128;Ut++)qt[Ut]=!1;var Gt={name:"VirtualKeyboard",data:function(){return{octave:4,noteActive:qt}},mounted:function(){var t=this;window.addEventListener("keydown",function(e){var n=v(e);n&&t.$emit("noteon",{channel:1,note:{name:"",number:12*t.octave+n,octave:t.octave},rawVelocity:127,target:void 0,timestamp:t.$store.state.audioContext.currentTime,velocity:1})}),window.addEventListener("keyup",function(e){var n=v(e);n&&t.$emit("noteoff",{channel:1,note:{name:"",number:12*t.octave+n,octave:t.octave},rawVelocity:127,target:void 0,timestamp:t.$store.state.audioContext.currentTime,velocity:1})}),this.$on("noteon",function(e){t.noteActive[e.note.number]=!0,e.note.octave+1<t.octave?t.octave=e.note.octave+1:e.note.octave+2>t.octave+3&&(t.octave=e.note.octave-1)}),this.$on("noteoff",function(e){t.noteActive[e.note.number]=!1})},methods:{selectOutput:function(t){this.selectedOutput=t},down:function(t,e){1===t.buttons&&this.$emit("noteon",{channel:1,note:{name:"",number:12*this.octave+e,octave:this.octave},rawVelocity:127,target:t.target,timestamp:this.$store.state.audioContext.currentTime,velocity:1})},up:function(t,e){this.$emit("noteoff",{channel:1,note:{name:"",number:12*this.octave+e,octave:this.octave},rawVelocity:127,target:t.target,timestamp:this.$store.state.audioContext.currentTime,velocity:1})}}},Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"virtualkeyboard"},[n("front",{staticClass:"gameboy"},[n("div",{staticClass:"row"},[n("div",{staticClass:"row"},[n("div",[t._v("Octave:")]),t._v(" "),n("div",{staticClass:"row"},[n("button",{on:{click:function(e){t.octave>0&&t.octave--}}},[t._v("Down")]),t._v(" "),n("div",{staticClass:"minidisplay"},[t._v(t._s(t.octave))]),t._v(" "),n("button",{on:{click:function(e){t.octave<10&&t.octave++}}},[t._v("Up")])]),t._v(" "),n("p",[t._v("Keyboard: 'C' = Note C")])])]),t._v(" "),n("div",{staticClass:"keyboard"},t._l([1,2,3],function(e){return n("div",{key:e,staticClass:"octave"},[n("div",{staticClass:"keys"},[n("div",{staticClass:"C",class:{active:t.noteActive[12*t.octave+12*e+0]},on:{mousedown:function(n){t.down(n,12*e+0)},mouseup:function(n){t.up(n,12*e+0)},mouseover:function(n){t.down(n,12*e+0)},mouseout:function(n){t.up(n,12*e+0)}}},[n("div",{staticClass:"text-bottom"},[t._v("C")])]),t._v(" "),n("div",{staticClass:"Db black",class:{active:t.noteActive[12*t.octave+12*e+1]},on:{mousedown:function(n){t.down(n,12*e+1)},mouseup:function(n){t.up(n,12*e+1)},mouseover:function(n){t.down(n,12*e+1)},mouseout:function(n){t.up(n,12*e+1)}}},[n("div",{staticClass:"text-bottom"},[t._v("Db")])]),t._v(" "),n("div",{staticClass:"D",class:{active:t.noteActive[12*t.octave+12*e+2]},on:{mousedown:function(n){t.down(n,12*e+2)},mouseup:function(n){t.up(n,12*e+2)},mouseover:function(n){t.down(n,12*e+2)},mouseout:function(n){t.up(n,12*e+2)}}},[n("div",{staticClass:"text-bottom"},[t._v("D")])]),t._v(" "),n("div",{staticClass:"Eb black",class:{active:t.noteActive[12*t.octave+12*e+3]},on:{mousedown:function(n){t.down(n,12*e+3)},mouseup:function(n){t.up(n,12*e+3)},mouseover:function(n){t.down(n,12*e+3)},mouseout:function(n){t.up(n,12*e+3)}}},[n("div",{staticClass:"text-bottom"},[t._v("Eb")])]),t._v(" "),n("div",{staticClass:"E",class:{active:t.noteActive[12*t.octave+12*e+4]},on:{mousedown:function(n){t.down(n,12*e+4)},mouseup:function(n){t.up(n,12*e+4)},mouseover:function(n){t.down(n,12*e+4)},mouseout:function(n){t.up(n,12*e+4)}}},[n("div",{staticClass:"text-bottom"},[t._v("E")])]),t._v(" "),n("div",{staticClass:"F",class:{active:t.noteActive[12*t.octave+12*e+5]},on:{mousedown:function(n){t.down(n,12*e+5)},mouseup:function(n){t.up(n,12*e+5)},mouseover:function(n){t.down(n,12*e+5)},mouseout:function(n){t.up(n,12*e+5)}}},[n("div",{staticClass:"text-bottom"},[t._v("F")])]),t._v(" "),n("div",{staticClass:"Gb black",class:{active:t.noteActive[12*t.octave+12*e+6]},on:{mousedown:function(n){t.down(n,12*e+6)},mouseup:function(n){t.up(n,12*e+6)},mouseover:function(n){t.down(n,12*e+6)},mouseout:function(n){t.up(n,12*e+6)}}},[n("div",{staticClass:"text-bottom"},[t._v("Gb")])]),t._v(" "),n("div",{staticClass:"G",class:{active:t.noteActive[12*t.octave+12*e+7]},on:{mousedown:function(n){t.down(n,12*e+7)},mouseup:function(n){t.up(n,12*e+7)},mouseover:function(n){t.down(n,12*e+7)},mouseout:function(n){t.up(n,12*e+7)}}},[n("div",{staticClass:"text-bottom"},[t._v("G")])]),t._v(" "),n("div",{staticClass:"Ab black",class:{active:t.noteActive[12*t.octave+12*e+8]},on:{mousedown:function(n){t.down(n,12*e+8)},mouseup:function(n){t.up(n,12*e+8)},mouseover:function(n){t.down(n,12*e+8)},mouseout:function(n){t.up(n,12*e+8)}}},[n("div",{staticClass:"text-bottom"},[t._v("Ab")])]),t._v(" "),n("div",{staticClass:"A",class:{active:t.noteActive[12*t.octave+12*e+9]},on:{mousedown:function(n){t.down(n,12*e+9)},mouseup:function(n){t.up(n,12*e+9)},mouseover:function(n){t.down(n,12*e+9)},mouseout:function(n){t.up(n,12*e+9)}}},[n("div",{staticClass:"text-bottom"},[t._v("A")])]),t._v(" "),n("div",{staticClass:"Bb black",class:{active:t.noteActive[12*t.octave+12*e+10]},on:{mousedown:function(n){t.down(n,12*e+10)},mouseup:function(n){t.up(n,12*e+10)},mouseover:function(n){t.down(n,12*e+10)},mouseout:function(n){t.up(n,12*e+10)}}},[n("div",{staticClass:"text-bottom"},[t._v("Bb")])]),t._v(" "),n("div",{staticClass:"B",class:{active:t.noteActive[12*t.octave+12*e+11]},on:{mousedown:function(n){t.down(n,12*e+11)},mouseup:function(n){t.up(n,12*e+11)},mouseover:function(n){t.down(n,12*e+11)},mouseout:function(n){t.up(n,12*e+11)}}},[n("div",{staticClass:"text-bottom"},[t._v("B")])])])])}))]),t._v(" "),n("back",{attrs:{"has-event-inputs":"true","has-event-outputs":"true"}},[t._v("\n    back\n  ")])],1)},zt=[],Pt={render:Lt,staticRenderFns:zt},Dt=Pt,jt=n("VU/8"),Wt=d,Jt=jt(Gt,Dt,!1,Wt,"data-v-0d31ec80",null),Yt=Jt.exports,Qt=n("addU"),Ht=n.n(Qt),Xt=void 0,Zt={name:"MidiPlayer",props:["vkeyboard"],data:function(){return{selectedOutput:void 0,playing:!1}},methods:{selectOutput:function(t){console.log(t),this.selectedOutput=t},play:function(){this.playing=!0,this.iterateEvent(0)},stop:function(){this.playing=!1},iterateEvent:function(t){var e=this,n=Xt.track[1].event[t];this.playing&&n&&(0===n.deltaTime?(console.log("emit",n),this.emitEvent(t,n)):setTimeout(function(){e.emitEvent(t,n)},n.deltaTime/Xt.timeDivision*250))},emitEvent:function(t,e){if(this.playing){var n=void 0;switch(e.type){case 9:n=~~(e.data[0]/12)-2,this.$emit("noteon",{channel:e.channel,note:{name:"",number:e.data[0],octave:n},rawVelocity:e.data[1],target:this.$refs.midiplayer,timestamp:this.$store.state.audioContext.currentTime,velocity:e.data[1]/127});break;case 8:n=~~(e.data[0]/12)-2,this.$emit("noteoff",{channel:e.channel,note:{name:"",number:e.data[0],octave:n},rawVelocity:e.data[1],target:this.$refs.midiplayer,timestamp:this.$store.state.audioContext.currentTime,velocity:e.data[1]/127})}this.iterateEvent(t+1)}}},mounted:function(){var t=this;this.$watch("outputs",function(e){t.selectedOutput=e[0]}),fetch("static/jingle_bells.mid").then(function(t){return t.arrayBuffer()}).then(function(t){return Ht.a.parse(new Uint8Array(t))}).then(function(t){Xt=t,console.log("ready midi")}),this.$on("noteon",function(e){t.selectedOutput&&t.selectedOutput.device.$emit("noteon",e)}),this.$on("noteoff",function(e){t.selectedOutput&&t.selectedOutput.device.$emit("noteoff",e)})}},te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"midiplayer"},[n("front",{ref:"midiplayer",staticClass:"gameboy"},[n("h1",[t._v("Jingle Bells Player")]),t._v(" "),n("button",{on:{click:function(e){t.play()}}},[t._v("Play")]),t._v(" "),n("button",{on:{click:function(e){t.stop()}}},[t._v("Stop")]),t._v(" "),n("h2",[t._v("(soon MIDI Player)")])]),t._v(" "),n("back",{ref:"back",attrs:{"has-event-outputs":"true"}},[t._v("\n    Back\n  ")])],1)},ee=[],ne={render:te,staticRenderFns:ee},oe=ne,ie=n("VU/8"),se=l,ae=ie(Zt,oe,!1,se,"data-v-cb1ab22e",null),ue=ae.exports,ce={name:"Cables"},re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$store.state.backview?n("svg",[n("circle",{attrs:{cx:"300",cy:"300",r:"20"}})]):t._e()},ve=[],de={render:re,staticRenderFns:ve},le=de,fe=n("VU/8"),me=f,pe=fe(ce,le,!1,me,"data-v-f9a00c88",null),he=pe.exports,ye={name:"Main",data:function(){return{output:void 0,outputs:[]}},mounted:function(){var t=this;this.output=this.$refs.soundplayer,this.outputs.push({name:"VirtualKeyboard",device:this.$refs.vkeyboard},{name:"SoundPlayer",device:this.$refs.soundplayer},{name:"KSynth",device:this.$refs.ksynth}),window.addEventListener("keydown",function(e){"Tab"===e.code&&(t.$store.state.backview=!t.$store.state.backview,e.preventDefault())}),console.log("Initial cables"),this.$refs.soundplayer.$refs.back.connectAudio(this.$refs.equalizer,this.$refs.soundplayer),this.$refs.ksynth.$refs.back.connectAudio(this.$refs.equalizer,this.$refs.ksynth),this.$refs.midiinput.$refs.back.connectEvent(this.$refs.ksynth,this.$refs.vkeyboard),this.$refs.midiinput.$refs.back.connectEvent(this.$refs.soundplayer,this.$refs.vkeyboard),this.$refs.midiplayer.$refs.back.connectEvent(this.$refs.vkeyboard,this.$refs.midiplayer),this.$refs.midiplayer.$refs.back.connectEvent(this.$refs.vkeyboard,this.$refs.midiinput)},components:{MidiInput:R,SoundPlayer:et,Equalizer:dt,KSynth:St,VirtualKeyboard:Yt,MidiPlayer:ue,Cables:he}},be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rack row"},[n("div",{staticClass:"overlay"},[n("cables")],1),t._v(" "),n("equalizer",{ref:"equalizer",attrs:{output:t.$store.state.audioContext.destination}}),t._v(" "),n("virtual-keyboard",{ref:"vkeyboard",staticClass:"rack-item",staticStyle:{"flex-grow":"1"},attrs:{outputs:t.outputs.slice(1)}}),t._v(" "),n("midi-input",{ref:"midiinput",attrs:{outputs:t.outputs}}),t._v(" "),n("midi-player",{ref:"midiplayer",attrs:{outputs:t.outputs,vkeyboard:{name:"vkey",device:t.$refs.vkeyboard}}}),t._v(" "),n("sound-player",{ref:"soundplayer",attrs:{output:t.$store.state.mixer[0]}}),t._v(" "),n("k-synth",{ref:"ksynth",attrs:{output:t.$store.state.mixer[0]}})],1)},_e=[],we={render:be,staticRenderFns:_e},$e=we,Ce=n("VU/8"),ke=m,ge=Ce(ye,$e,!1,ke,"data-v-037d967c",null),Ae=ge.exports;p.a.use(x.a);var xe=new x.a({routes:[{path:"/",name:"Main",component:Ae}]});p.a.use(h.a);for(var Ee=new AudioContext,Oe=[],Ie=0;Ie<16;Ie++)Oe.push(Ee.createGain());var Fe={audioContext:Ee,mixer:Oe,backview:!1},Ke=new h.a.Store({state:Fe});p.a.config.productionTip=!1,p.a.component("front",_t),p.a.component("back",Ot),p.a.use(h.a),new p.a({el:"#app",router:xe,store:Ke,template:"<App/>",components:{App:A}})},NO0K:function(t,e){},WPyr:function(t,e){},nIYI:function(t,e){},rWrU:function(t,e){},weY5:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2edeb41e7faf1b79d41c.js.map